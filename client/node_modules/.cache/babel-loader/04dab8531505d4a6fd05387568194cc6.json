{"ast":null,"code":"import _objectSpread from \"/Users/vishnukdawah/Documents/github/MERN-apps/devConnector/client/node_modules/@babel/runtime/helpers/esm/objectSpread\";\n// This file starts with Section 8 video 40\n// we created 2 new types in types.js for this file: REGISTER_SUCCESS & REGISTER_FAIL and we use this import to bring them in so we can use them\nimport { REGISTER_SUCCESS, REGISTER_FAIL, USER_LOADED, AUTH_ERROR, LOGIN_SUCCESS, LOGIN_FAIL } from \"../actions/types\"; // this is the initial state object, representing the initial state of auth.js\n\nconst initialState = {\n  // we need the json webtoken, which we'll store in local storage, so we use localStorage.getItem(\"token\") to get that token from local storage which should be under the name \"token\". This is a \"vanilla\" javascript function\n  // We access local storage with localStorage and we want to get an item (the token) with getItem()\n  token: localStorage.getItem(\"token\"),\n  // is set to null to begin with but will change once we send a request to register a user/login and if successful, isAuthenticated will be set to true\n  // We also set it to null so we can check if it's null later, if it is you should restrict access to certain content\n  isAuthenticated: null,\n  // we use this to check to see if once we load a user, the loading is done. We will set to false once it is done\n  loading: true,\n  // once we send a request to get a user, that will be put in here\n  user: null\n}; // we have \"state\" and \"action\" as params for our export function b/c we want to put the initial state for auth.js in the root reducer (root reducer holds the state of all reducers to make access to all components easier). \"initialState\" is assigned to \"state\" so when we access the state we can say \"state\" instead of \"initialState\"\n//the \"action\" gets dispatched from another file to here, which we then export as part of this export statement for use in other files\n\nexport default function (state = initialState, action) {\n  const type = action.type,\n        payload = action.payload;\n\n  switch (type) {\n    case USER_LOADED:\n      return _objectSpread({}, state, {\n        isAuthenticated: true,\n        loading: false,\n        user: payload\n      });\n    // when a register of a user is successful we want the website to log them in automatically. We get a JSON webtoken, so we put that in local storage under the name \"token\" with localStorage.setItem(\"token\", payload.token)    This is a key-value pair, just like how we do in a hashmap in Java. We access the actual token with payload.token since it is part of the payload\n\n    case REGISTER_SUCCESS:\n      localStorage.setItem(\"token\", payload.token);\n      return _objectSpread({}, state, payload, {\n        // all of whatever is currently in the payload\n        isAuthenticated: true,\n        // set to true b/c the register was a success\n        loading: false // set to false b/c we have gotten a response (REGISTER_SUCCEESS) and its been loaded\n\n      });\n\n    case REGISTER_FAIL:\n    case AUTH_ERROR:\n      // we want this case to do the same thing as case REGISTER_FAIL so we put right after it\n      // if the register failed, remove the token that was generated (generated for the 1st time) so they can't login. They can still try to register again, but they'll get a new token instead\n      // removeItem() only needs the key to remove the token\n      localStorage.removeItem(\"token\");\n      return _objectSpread({}, state, {\n        // all of whatever is currently in the state\n        token: null,\n        // set token to null to take away the token\n        isAuthenticated: false,\n        // set to false b/c the register failed\n        loading: false // even though register failed, it's still done loading so set to false\n\n      });\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["/Users/vishnukdawah/Documents/github/MERN-apps/devConnector/client/src/reducers/auth.js"],"names":["REGISTER_SUCCESS","REGISTER_FAIL","USER_LOADED","AUTH_ERROR","LOGIN_SUCCESS","LOGIN_FAIL","initialState","token","localStorage","getItem","isAuthenticated","loading","user","state","action","type","payload","setItem","removeItem"],"mappings":";AAAA;AACA;AACA,SACEA,gBADF,EAEEC,aAFF,EAGEC,WAHF,EAIEC,UAJF,EAKEC,aALF,EAMEC,UANF,QAOO,kBAPP,C,CASA;;AACA,MAAMC,YAAY,GAAG;AACnB;AACA;AACAC,EAAAA,KAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAHY;AAInB;AACA;AACAC,EAAAA,eAAe,EAAE,IANE;AAOnB;AACAC,EAAAA,OAAO,EAAE,IARU;AASnB;AACAC,EAAAA,IAAI,EAAE;AAVa,CAArB,C,CAaA;AACA;;AACA,eAAe,UAASC,KAAK,GAAGP,YAAjB,EAA+BQ,MAA/B,EAAuC;AAAA,QAC5CC,IAD4C,GAC1BD,MAD0B,CAC5CC,IAD4C;AAAA,QACtCC,OADsC,GAC1BF,MAD0B,CACtCE,OADsC;;AAGpD,UAAQD,IAAR;AACE,SAAKb,WAAL;AACE,+BACKW,KADL;AAEEH,QAAAA,eAAe,EAAE,IAFnB;AAGEC,QAAAA,OAAO,EAAE,KAHX;AAIEC,QAAAA,IAAI,EAAEI;AAJR;AAOF;;AACA,SAAKhB,gBAAL;AACEQ,MAAAA,YAAY,CAACS,OAAb,CAAqB,OAArB,EAA8BD,OAAO,CAACT,KAAtC;AACA,+BACKM,KADL,EAEKG,OAFL;AAEc;AACZN,QAAAA,eAAe,EAAE,IAHnB;AAGyB;AACvBC,QAAAA,OAAO,EAAE,KAJX,CAIiB;;AAJjB;;AAOF,SAAKV,aAAL;AACA,SAAKE,UAAL;AAAiB;AACf;AACA;AACAK,MAAAA,YAAY,CAACU,UAAb,CAAwB,OAAxB;AACA,+BACKL,KADL;AACY;AACVN,QAAAA,KAAK,EAAE,IAFT;AAEe;AACbG,QAAAA,eAAe,EAAE,KAHnB;AAG0B;AACxBC,QAAAA,OAAO,EAAE,KAJX,CAIiB;;AAJjB;;AAMF;AACE,aAAOE,KAAP;AA/BJ;AAiCD","sourcesContent":["// This file starts with Section 8 video 40\n// we created 2 new types in types.js for this file: REGISTER_SUCCESS & REGISTER_FAIL and we use this import to bring them in so we can use them\nimport {\n  REGISTER_SUCCESS,\n  REGISTER_FAIL,\n  USER_LOADED,\n  AUTH_ERROR,\n  LOGIN_SUCCESS,\n  LOGIN_FAIL\n} from \"../actions/types\";\n\n// this is the initial state object, representing the initial state of auth.js\nconst initialState = {\n  // we need the json webtoken, which we'll store in local storage, so we use localStorage.getItem(\"token\") to get that token from local storage which should be under the name \"token\". This is a \"vanilla\" javascript function\n  // We access local storage with localStorage and we want to get an item (the token) with getItem()\n  token: localStorage.getItem(\"token\"),\n  // is set to null to begin with but will change once we send a request to register a user/login and if successful, isAuthenticated will be set to true\n  // We also set it to null so we can check if it's null later, if it is you should restrict access to certain content\n  isAuthenticated: null,\n  // we use this to check to see if once we load a user, the loading is done. We will set to false once it is done\n  loading: true,\n  // once we send a request to get a user, that will be put in here\n  user: null\n};\n\n// we have \"state\" and \"action\" as params for our export function b/c we want to put the initial state for auth.js in the root reducer (root reducer holds the state of all reducers to make access to all components easier). \"initialState\" is assigned to \"state\" so when we access the state we can say \"state\" instead of \"initialState\"\n//the \"action\" gets dispatched from another file to here, which we then export as part of this export statement for use in other files\nexport default function(state = initialState, action) {\n  const { type, payload } = action;\n\n  switch (type) {\n    case USER_LOADED:\n      return {\n        ...state,\n        isAuthenticated: true,\n        loading: false,\n        user: payload\n      };\n\n    // when a register of a user is successful we want the website to log them in automatically. We get a JSON webtoken, so we put that in local storage under the name \"token\" with localStorage.setItem(\"token\", payload.token)    This is a key-value pair, just like how we do in a hashmap in Java. We access the actual token with payload.token since it is part of the payload\n    case REGISTER_SUCCESS:\n      localStorage.setItem(\"token\", payload.token);\n      return {\n        ...state, // all of whatever is currently in the state\n        ...payload, // all of whatever is currently in the payload\n        isAuthenticated: true, // set to true b/c the register was a success\n        loading: false // set to false b/c we have gotten a response (REGISTER_SUCCEESS) and its been loaded\n      };\n\n    case REGISTER_FAIL:\n    case AUTH_ERROR: // we want this case to do the same thing as case REGISTER_FAIL so we put right after it\n      // if the register failed, remove the token that was generated (generated for the 1st time) so they can't login. They can still try to register again, but they'll get a new token instead\n      // removeItem() only needs the key to remove the token\n      localStorage.removeItem(\"token\");\n      return {\n        ...state, // all of whatever is currently in the state\n        token: null, // set token to null to take away the token\n        isAuthenticated: false, // set to false b/c the register failed\n        loading: false // even though register failed, it's still done loading so set to false\n      };\n    default:\n      return state;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}