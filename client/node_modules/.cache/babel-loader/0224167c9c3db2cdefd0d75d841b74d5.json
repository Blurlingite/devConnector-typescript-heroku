{"ast":null,"code":"import _objectSpread from \"/Users/vishnukdawah/Documents/github/devConnector/devConnector/client/node_modules/@babel/runtime/helpers/esm/objectSpread\";\n// Section 11 Lecture 60 - Post Reducer, Action & Initial\nimport { GET_POSTS, POST_ERROR, UPDATE_LIKES, DELETE_POST, ADD_POST, GET_POST, ADD_COMMENT, REMOVE_COMMENT } from \"../actions/types\";\nconst initialState = {\n  posts: [],\n  post: null,\n  loading: true,\n  error: {}\n};\nexport default function (state = initialState, action) {\n  const type = action.type,\n        payload = action.payload;\n\n  switch (type) {\n    case GET_POSTS:\n      return _objectSpread({}, state, {\n        posts: payload,\n        loading: false\n      });\n\n    case GET_POST:\n      return _objectSpread({}, state, {\n        post: payload,\n        loading: false\n      });\n\n    case ADD_POST:\n      return _objectSpread({}, state, {\n        // \"...state.posts\" makes a copy of all the posts in the state. Then we add the new post that comes in with the payload. We put these things in an array b/c it's just a collection of posts, and we assign it to the \"posts\" field\n        // Any component that uses the \"posts\" part of the state will have access to the new post\n        // we put payload first so that the newest post is the first and will be displayed above the older ones. If you want it to be at the bottom, just switch the order to ...state.posts,payload\n        posts: [payload, ...state.posts],\n        loading: false\n      });\n\n    case DELETE_POST:\n      return _objectSpread({}, state, {\n        // we use filter() to filter out the one post that got deleted so it doesn't show up anymore. It got deleted from the server, so we need to delete it from the state (in the redux container)\n        // If the post's ID (post._id) is equal to the ID in the payload (\"payload\", since only id is in the payload as shown in post.js in the \"actions\" folder)\n        posts: state.posts.filter(post => post._id !== payload),\n        loading: false\n      });\n\n    case POST_ERROR:\n      return _objectSpread({}, state, {\n        error: payload,\n        loading: false\n      });\n\n    case UPDATE_LIKES:\n      return _objectSpread({}, state, {\n        // for each post: If the post's ID is equal to the payload's ID (b/c we sent the post's ID through the payload) that means this is the correct post that we are adding/removing a like to. If we have the correct post, return the post's state (containing that post's data) which is \"...post\"\n        // Also, we are setting the \"likes\" field of the post object to the amount of likes on the payload (payload.likes). When you like or unlike a post, that change will be in the payload.\n        // Else (:), return the post as it is (if it's not the one we are looking for), \"post\"\n        posts: state.posts.map(post => post._id === payload.id ? _objectSpread({}, post, {\n          likes: payload.likes\n        }) : post),\n        loading: false\n      });\n\n    case ADD_COMMENT:\n      return _objectSpread({}, state, {\n        post: _objectSpread({}, state.post, {\n          comments: payload\n        }),\n        loading: false\n      });\n\n    case REMOVE_COMMENT:\n      return _objectSpread({}, state, {\n        post: _objectSpread({}, state.post, {\n          comments: state.post.comments.filter(comment => comment._id !== payload)\n        }),\n        loading: false\n      });\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["/Users/vishnukdawah/Documents/github/devConnector/devConnector/client/src/reducers/post.js"],"names":["GET_POSTS","POST_ERROR","UPDATE_LIKES","DELETE_POST","ADD_POST","GET_POST","ADD_COMMENT","REMOVE_COMMENT","initialState","posts","post","loading","error","state","action","type","payload","filter","_id","map","id","likes","comments","comment"],"mappings":";AAAA;AACA,SACEA,SADF,EAEEC,UAFF,EAGEC,YAHF,EAIEC,WAJF,EAKEC,QALF,EAMEC,QANF,EAOEC,WAPF,EAQEC,cARF,QASO,kBATP;AAWA,MAAMC,YAAY,GAAG;AACnBC,EAAAA,KAAK,EAAE,EADY;AAEnBC,EAAAA,IAAI,EAAE,IAFa;AAGnBC,EAAAA,OAAO,EAAE,IAHU;AAInBC,EAAAA,KAAK,EAAE;AAJY,CAArB;AAOA,eAAe,UAASC,KAAK,GAAGL,YAAjB,EAA+BM,MAA/B,EAAuC;AAAA,QAC5CC,IAD4C,GAC1BD,MAD0B,CAC5CC,IAD4C;AAAA,QACtCC,OADsC,GAC1BF,MAD0B,CACtCE,OADsC;;AAGpD,UAAQD,IAAR;AACE,SAAKf,SAAL;AACE,+BACKa,KADL;AAEEJ,QAAAA,KAAK,EAAEO,OAFT;AAGEL,QAAAA,OAAO,EAAE;AAHX;;AAMF,SAAKN,QAAL;AACE,+BACKQ,KADL;AAEEH,QAAAA,IAAI,EAAEM,OAFR;AAGEL,QAAAA,OAAO,EAAE;AAHX;;AAMF,SAAKP,QAAL;AACE,+BACKS,KADL;AAEE;AACA;AACA;AACAJ,QAAAA,KAAK,EAAE,CAACO,OAAD,EAAU,GAAGH,KAAK,CAACJ,KAAnB,CALT;AAMEE,QAAAA,OAAO,EAAE;AANX;;AASF,SAAKR,WAAL;AACE,+BACKU,KADL;AAEE;AACA;AACAJ,QAAAA,KAAK,EAAEI,KAAK,CAACJ,KAAN,CAAYQ,MAAZ,CAAmBP,IAAI,IAAIA,IAAI,CAACQ,GAAL,KAAaF,OAAxC,CAJT;AAKEL,QAAAA,OAAO,EAAE;AALX;;AAQF,SAAKV,UAAL;AACE,+BACKY,KADL;AAEED,QAAAA,KAAK,EAAEI,OAFT;AAGEL,QAAAA,OAAO,EAAE;AAHX;;AAMF,SAAKT,YAAL;AACE,+BACKW,KADL;AAGE;AACA;AACA;AACAJ,QAAAA,KAAK,EAAEI,KAAK,CAACJ,KAAN,CAAYU,GAAZ,CAAgBT,IAAI,IACzBA,IAAI,CAACQ,GAAL,KAAaF,OAAO,CAACI,EAArB,qBAA+BV,IAA/B;AAAqCW,UAAAA,KAAK,EAAEL,OAAO,CAACK;AAApD,aAA8DX,IADzD,CANT;AASEC,QAAAA,OAAO,EAAE;AATX;;AAYF,SAAKL,WAAL;AACE,+BACKO,KADL;AAEEH,QAAAA,IAAI,oBAAOG,KAAK,CAACH,IAAb;AAAmBY,UAAAA,QAAQ,EAAEN;AAA7B,UAFN;AAGEL,QAAAA,OAAO,EAAE;AAHX;;AAKF,SAAKJ,cAAL;AACE,+BACKM,KADL;AAEEH,QAAAA,IAAI,oBACCG,KAAK,CAACH,IADP;AAEFY,UAAAA,QAAQ,EAAET,KAAK,CAACH,IAAN,CAAWY,QAAX,CAAoBL,MAApB,CACRM,OAAO,IAAIA,OAAO,CAACL,GAAR,KAAgBF,OADnB;AAFR,UAFN;AAQEL,QAAAA,OAAO,EAAE;AARX;;AAWF;AACE,aAAOE,KAAP;AAzEJ;AA2ED","sourcesContent":["// Section 11 Lecture 60 - Post Reducer, Action & Initial\nimport {\n  GET_POSTS,\n  POST_ERROR,\n  UPDATE_LIKES,\n  DELETE_POST,\n  ADD_POST,\n  GET_POST,\n  ADD_COMMENT,\n  REMOVE_COMMENT\n} from \"../actions/types\";\n\nconst initialState = {\n  posts: [],\n  post: null,\n  loading: true,\n  error: {}\n};\n\nexport default function(state = initialState, action) {\n  const { type, payload } = action;\n\n  switch (type) {\n    case GET_POSTS:\n      return {\n        ...state,\n        posts: payload,\n        loading: false\n      };\n\n    case GET_POST:\n      return {\n        ...state,\n        post: payload,\n        loading: false\n      };\n\n    case ADD_POST:\n      return {\n        ...state,\n        // \"...state.posts\" makes a copy of all the posts in the state. Then we add the new post that comes in with the payload. We put these things in an array b/c it's just a collection of posts, and we assign it to the \"posts\" field\n        // Any component that uses the \"posts\" part of the state will have access to the new post\n        // we put payload first so that the newest post is the first and will be displayed above the older ones. If you want it to be at the bottom, just switch the order to ...state.posts,payload\n        posts: [payload, ...state.posts],\n        loading: false\n      };\n\n    case DELETE_POST:\n      return {\n        ...state,\n        // we use filter() to filter out the one post that got deleted so it doesn't show up anymore. It got deleted from the server, so we need to delete it from the state (in the redux container)\n        // If the post's ID (post._id) is equal to the ID in the payload (\"payload\", since only id is in the payload as shown in post.js in the \"actions\" folder)\n        posts: state.posts.filter(post => post._id !== payload),\n        loading: false\n      };\n\n    case POST_ERROR:\n      return {\n        ...state,\n        error: payload,\n        loading: false\n      };\n\n    case UPDATE_LIKES:\n      return {\n        ...state,\n\n        // for each post: If the post's ID is equal to the payload's ID (b/c we sent the post's ID through the payload) that means this is the correct post that we are adding/removing a like to. If we have the correct post, return the post's state (containing that post's data) which is \"...post\"\n        // Also, we are setting the \"likes\" field of the post object to the amount of likes on the payload (payload.likes). When you like or unlike a post, that change will be in the payload.\n        // Else (:), return the post as it is (if it's not the one we are looking for), \"post\"\n        posts: state.posts.map(post =>\n          post._id === payload.id ? { ...post, likes: payload.likes } : post\n        ),\n        loading: false\n      };\n\n    case ADD_COMMENT:\n      return {\n        ...state,\n        post: { ...state.post, comments: payload },\n        loading: false\n      };\n    case REMOVE_COMMENT:\n      return {\n        ...state,\n        post: {\n          ...state.post,\n          comments: state.post.comments.filter(\n            comment => comment._id !== payload\n          )\n        },\n        loading: false\n      };\n\n    default:\n      return state;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}